{"version":3,"sources":["utils/authApi.js","contexts/AccountContext.js","components/ProtectedRoute.js","images/logo.svg","components/Header.js","utils/api.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/FormField.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeletePlacePopup.js","components/PopupWithImage.js","components/AroundTheUS.js","images/avatar.png","components/Login.js","components/Register.js","components/InfoTooltip.js","components/Footer.js","components/App.js","reportWebVitals.js","index.js"],"names":["auth","baseUrl","headers","this","_baseUrl","_headers","token","fetch","method","then","res","ok","json","Promise","reject","status","data","body","JSON","stringify","localStorage","setItem","checkToken","credentials","AccountContext","createContext","ProtectedRoute","Component","component","props","value","useContext","loggedIn","to","Header","handleLogout","accountContext","useState","showMenu","setShowMenu","className","src","logo","alt","accountData","email","onClick","activeStyle","display","e","target","blur","aria-label","api","cardId","liked","authorization","CurrentUserContext","Card","card","currentUserId","onCardClick","onDeleteClick","onLikeClick","currentUserOwns","owner","_id","currentUserLikes","likes","some","user","id","link","name","type","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","currentUser","avatar","about","map","PopupWithForm","formRef","useRef","resetOnEsc","key","current","reset","useEffect","isOpen","document","addEventListener","removeEventListener","ref","onSubmit","onReset","setTimeout","heading","children","submitReady","submitText","onClose","FormField","undefined","isModal","error","label","placeholder","minLength","minMax","maxLength","onChange","handleChange","autoComplete","required","EditProfilePopup","isSaving","values","setValues","errors","setErrors","setSubmitReady","split","pop","validity","valid","updatedErrors","Object","i","validationMessage","preventDefault","EditAvatarPopup","setAvatar","setError","AddPlacePopup","errorValues","DeletePlacePopup","PopupWithImage","AroundTheUS","setCurrentUser","setCards","selectedCard","selectCard","setIsSaving","isProfilePopupOpen","setIsProfilePopupOpen","isAvatarPopupOpen","setIsAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isDeletePlacePopupOpen","setIsDeletePlacePopupOpen","isImagePopupOpen","setIsImagePopupOpen","closeAllPopups","setListener","closeOnEsc","listen","getUserInfo","catch","err","console","log","getInitialCards","Provider","updateLikes","updatedCard","newCards","c","userData","setUserInfo","avatarData","setUserAvatar","cardData","addCard","newCard","deleteCard","response","filter","Login","handleLogin","isLoading","password","Register","handleRegister","InfoTooltip","Footer","App","history","useHistory","setLoggedIn","setAccountData","setIsLoading","isTooltipSuccessOpen","setIsTooltipSuccessOpen","isTooltipErrorOpen","setIsTooltipErrorOpen","isTooltipInvalidOpen","setIsTooltipInvalidOpen","closeAllTooltips","login","push","getItem","removeItem","exact","path","register","finally","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","getElementById"],"mappings":"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","file":"static/js/main.5febe046.chunk.js","sourcesContent":["class AuthApi {\r\n  // temporary separate authorization api module -- will combine in next stage\r\n\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl= baseUrl;\r\n    this._headers= headers;\r\n  }\r\n\r\n\r\n  checkToken(token) {\r\n    return fetch(this._baseUrl + 'users/me', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`,\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (res.ok) return res.json();\r\n      return Promise.reject(`Error: ${res.status}`);\r\n    })\r\n  }\r\n\r\n\r\n  login(data) {\r\n    return fetch(this._baseUrl + 'signin', {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data)\r\n    })\r\n    .then(res => {\r\n      if (res.ok) return res.json();\r\n      return Promise.reject(`Error: ${res.status}`);\r\n    })\r\n    .then(data => {\r\n      localStorage.setItem('jwt', data.token);\r\n      return this.checkToken(data.token);\r\n    }); \r\n  }\r\n\r\n\r\n  register(credentials) {\r\n    return fetch(this._baseUrl + 'signup', {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(credentials)\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } \r\n      return Promise.reject(`Error: ${res.status}`);\r\n    }).then(data => {\r\n      // now auto-login the user and save token\r\n      return fetch(this._baseUrl + 'signin', {\r\n        method: \"POST\",\r\n        headers: this._headers,\r\n        body: JSON.stringify(credentials)\r\n      })\r\n      .then(res => {\r\n        if (res.ok) return res.json();\r\n        return Promise.reject(`Error: ${res.status}`);\r\n      })\r\n      .then(res => {\r\n        localStorage.setItem('jwt', res.token);\r\n        return data; \r\n        // no need to run checkToken, we already have the data returned from registering\r\n      })\r\n    }); \r\n  }\r\n\r\n}\r\n\r\n\r\nexport const auth= new AuthApi({\r\n  baseUrl: \"https://register.nomoreparties.co/\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\"\r\n  }\r\n}); \r\n","import { createContext } from 'react';\r\n\r\nexport const AccountContext = createContext();","import { useContext } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { AccountContext } from '../contexts/AccountContext.js';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  const value = useContext(AccountContext);\r\n\r\n  return (\r\n    <Route>\r\n      {\r\n        () => value.loggedIn === true ? <Component {...props} /> : <Redirect to='./signin' />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute; ","export default __webpack_public_path__ + \"static/media/logo.4e8e0a1d.svg\";","import { useState, useContext } from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport { AccountContext } from '../contexts/AccountContext';\nimport logo from '../images/logo.svg';\n\n\n\nfunction Header({handleLogout}) {\n\n  const accountContext = useContext(AccountContext);\n  const [showMenu, setShowMenu]= useState(false);\n\n\n  const toggleMenu = (e) => {\n    setShowMenu(!showMenu);\n    e.target.blur();\n  }\n\n\n\n  return (\n    <header className=\"header\">\n      \n      <img className=\"header__logo\" src={logo} alt=\"Around The U.S.\" />\n      \n      <ul className={`header__account-menu ${accountContext.loggedIn ? 'header__account-menu_logged-in ' : ''}${showMenu ? 'header__account-menu_active ' : ''}list`}>\n        {accountContext.loggedIn ?\n          <>\n            <li><div className=\"header__account-item header__account-item_logged-in\">{accountContext.accountData.email}</div></li>\n            <li><button className=\"header__account-item header__account-item_logged-in header__account-logout button\" onClick={handleLogout}>Log out</button></li>\n          </>\n          :\n          <>\n            <li>\n              <NavLink activeStyle={{ display: 'none' }} to=\"/signup\" className=\"header__account-item link\">Sign up</NavLink>\n            </li>\n            <li>\n              <NavLink activeStyle={{ display: 'none' }} to=\"/signin\" className=\"header__account-item link\">Log in</NavLink>\n            </li>\n          </>\n        }\n      </ul>\n      {accountContext.loggedIn === true && \n        <button className={`header__menu-toggle ${showMenu ? 'header__menu-toggle_selected ' : ''}button`} onClick={toggleMenu} aria-label=\"Show Menu\"></button>\n      }\n \n    </header>   \n  );\n  \n}\n\nexport default Header;\n","class Api {\r\n\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl= baseUrl;\r\n    this._headers= headers;\r\n  }\r\n  \r\n  \r\n  getInitialCards() {\r\n    return fetch(this._baseUrl + 'cards', {\r\n      headers: this._headers\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } \r\n      return Promise.reject(`Error: ${res.status}`);\r\n    });\r\n  } \r\n\r\n\r\n  getUserInfo() {\r\n    return fetch(this._baseUrl + 'users/me', {\r\n      headers: this._headers\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } \r\n      return Promise.reject(`Error: ${res.status}`);\r\n    });\r\n  } \r\n\r\n\r\n  addCard(data) {\r\n    return fetch(this._baseUrl + 'cards', {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data)\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } \r\n      return Promise.reject(`Error: ${res.status}`);\r\n    }); \r\n  }\r\n\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(this._baseUrl + 'cards/' + cardId, {\r\n      method: \"DELETE\",\r\n      headers: this._headers\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } \r\n      return Promise.reject(`Error: ${res.status}`);\r\n    }); \r\n  }\r\n  \r\n\r\n  updateLikes(cardId, liked) {\r\n    let method= 'DELETE';\r\n    if(liked) method= 'PUT';\r\n\r\n    return fetch(this._baseUrl + 'cards/likes/' + cardId, {\r\n      method: method,\r\n      headers: this._headers\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } \r\n      return Promise.reject(`Error: ${res.status}`);\r\n    }); \r\n  }\r\n\r\n\r\n  setUserInfo(data) {\r\n    return fetch(this._baseUrl + 'users/me', {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data)\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } \r\n      return Promise.reject(`Error: ${res.status}`);\r\n    }); \r\n  }\r\n  \r\n\r\n  setUserAvatar(data) {\r\n    return fetch(this._baseUrl + 'users/me/avatar', {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data)\r\n    }).then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } \r\n      return Promise.reject(`Error: ${res.status}`);\r\n    }); \r\n  }\r\n\r\n}\r\n\r\n\r\nexport const api= new Api({\r\n  baseUrl: \"https://around.nomoreparties.co/v1/group-6/\",\r\n  headers: {\r\n    authorization: \"95a5b594-7318-496e-ada2-f96a00133f51\",\r\n    \"Content-Type\": \"application/json\"\r\n  }\r\n}); \r\n","import { createContext } from 'react';\r\n\r\nexport const CurrentUserContext = createContext();","function Card({card, currentUserId, onCardClick, onDeleteClick, onLikeClick}) {\n\n  const currentUserOwns= card.owner._id === currentUserId;\n  const currentUserLikes= card.likes.some(user => user._id === currentUserId);\n\n  const handleClick= () => { onCardClick(card); }\n  const handleDeleteClick= () => { onDeleteClick(card); }\n  const handleLikeUnlike= (e) => { onLikeClick(card, e); }\n\n\n\n  return (\n    <li className=\"photo\" id={card._id}>\n      <img className=\"photo__image\" src={card.link} alt={card.name} onClick={handleClick} />\n      <div className=\"photo__meta\">\n        <h2 className=\"photo__caption\">{card.name}</h2>\n        <button type=\"button\" aria-label=\"Like\"\n          className={`photo__like button${currentUserLikes ? ' photo__like_on' : ''}`} \n          onClick={handleLikeUnlike}\n        >\n          <span className=\"photo__like-count\">{card.likes.length}</span>\n        </button>\n      </div>\n      {currentUserOwns && <button type=\"reset\" className=\"photo__delete button\" aria-label=\"Delete\" onClick={handleDeleteClick}></button>}\n    </li>\n  );\n\n}\n\nexport default Card;\n","\nimport { useContext } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nimport Card from './Card';\n\n\n\nfunction Main({cards, onEditAvatar, onEditProfile, onAddPlace, onCardClick, onDeleteClick, onLikeClick}) {\n\n  const currentUser = useContext(CurrentUserContext);\n  \n\n\n  return (\n    <main>\n          \n      <section className=\"profile\">\n        <button className=\"profile__edit-avatar\" aria-label=\"Edit Avatar\" onClick={onEditAvatar}>\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Avatar\" />\n        </button>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <button type=\"button\" className=\"profile__edit-info button\" aria-label=\"Edit profile\" onClick={onEditProfile}></button>\n          <p className=\"profile__about\">{currentUser.about}</p>\n        </div>\n        \n        <button type=\"button\" className=\"profile__add-image button\" aria-label=\"Add image\" onClick={onAddPlace}></button>\n      </section>\n\n      \n      <section className=\"photo-grid\">\n        <ul className=\"photo-grid__list list\">\n\n          {cards.map(card => (\n            <Card card={card} key={card._id} currentUserId={currentUser._id} onCardClick={onCardClick} onDeleteClick={onDeleteClick} onLikeClick={onLikeClick} />\n          ))}\n\n        </ul>\n      </section>\n\n    </main>\n  );\n}\n\nexport default Main;\n","import { useEffect, useRef } from \"react\";\n\nfunction PopupWithForm(props) {\n\n  const formRef= useRef();\n\n\n\n  const resetOnEsc= (e) => { \n    if(e.key === 'Escape') {\n      formRef.current.reset(); \n    }\n  }\n\n\n\n  useEffect(() => {\n    if(props.isOpen) document.addEventListener('keyup', resetOnEsc);\n    else document.removeEventListener('keyup', resetOnEsc);\n  }, [props.isOpen]);\n\n  return (\n    <div className={`popup ${props.isOpen ? 'popup_active' : ''}`}>\n      <form ref={formRef} name={`${props.name}-form`} className={`popup__item form modal modal_form_${props.name}`} onSubmit={props.onSubmit} onReset={() => setTimeout(() => { props.onReset && props.onReset(); }, 200)}>\n        \n        <h3 className=\"form__heading modal__heading\">{props.heading}</h3>\n        \n        {props.children}\n        \n        <button type=\"submit\" className={`button form__button modal__button modal__button_type_save${!props.submitReady && ' form__button_disabled modal__button_disabled'}`} name={`${props.name}-submit`}>{props.submitText}</button>\n        \n        <button type=\"reset\" className=\"popup__exit button\" aria-label=\"Close\" onClick={props.onClose}></button>\n      </form>\n    </div>\n  );\n  \n}\n\nexport default PopupWithForm;\n","function FormField(props) {\n\n  return (\n    <>\n      <input \n        type={props.type === undefined ? 'text' : props.type} \n        name={props.name}\n        id={props.name} \n        className={`form__input${props.isModal ? ' modal__input' : ''}${props.error ? ' form__input_type_error': ''}`} \n        aria-label={props.label} \n        placeholder={props.label} \n        minLength={props.minMax ? props.minMax[0] : undefined}\n        maxLength={props.minMax ? props.minMax[1] : undefined} \n        value={props.value} \n        onChange={props.handleChange}\n        autoComplete={props.type === 'password' ? `around-the-us ${props.name}` : ''}\n        required />\n      <span className={`form__error${props.error ? ' form__error_active' : ''}`}>{props.error}</span>\n    </>\n  );\n}\n\nexport default FormField;\n","\r\nimport { useEffect, useState, useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\nimport FormField from './FormField';\r\n\r\n\r\n\r\nfunction EditProfilePopup({isOpen, isSaving, onClose, onSubmit}) {\r\n\r\n  const currentUser= useContext(CurrentUserContext);\r\n\r\n  const [values, setValues]= useState({ name: '', about: '' });\r\n  const [errors, setErrors]= useState({});\r\n  const [submitReady, setSubmitReady]= useState(false);\r\n\r\n\r\n  \r\n  function handleChange(e) {\r\n    const name= e.target.name.split('-').pop();\r\n    setValues({...values, [name]: e.target.value });\r\n    \r\n    if(e.target.validity.valid) {\r\n      const updatedErrors= {...errors, [name]: '' }\r\n      setErrors(updatedErrors);\r\n      setSubmitReady(!Object.values(updatedErrors).some(i => i)); // enable submit if no error messages\r\n    } else {\r\n      setErrors({...errors, [name]: e.target.validationMessage });\r\n      setSubmitReady(false);\r\n    }\r\n  } \r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onSubmit(values);\r\n  }\r\n\r\n  const handleReset= () => {\r\n    setValues({ name: currentUser.name || '', about: currentUser.about || '' }); // prevent undefined value on controlled form field\r\n    setErrors({});\r\n    setSubmitReady(!!(currentUser.name && currentUser.about));\r\n  }\r\n\r\n\r\n  \r\n  useEffect(() => { \r\n    setValues({ name: currentUser.name, about: currentUser.about });\r\n    setSubmitReady(true);\r\n  }, [currentUser]); \r\n  \r\n\r\n\r\n  \r\n  return (\r\n    <PopupWithForm heading=\"Edit profile\" name=\"profile\" isOpen={isOpen} onClose={onClose} onReset={handleReset}\r\n      submitText={isSaving ? 'Saving...' : 'Save'} submitReady={submitReady} onSubmit={handleSubmit}>\r\n\r\n      <FormField isModal={true} name=\"profile-name\" label=\"Name\" minMax={[2, 40]} handleChange={handleChange} value={values.name} error={errors.name} />\r\n      <FormField isModal={true} name=\"profile-about\" label=\"About me\" minMax={[2, 200]} handleChange={handleChange} value={values.about} error={errors.about}  />\r\n    \r\n    </PopupWithForm>\r\n  );\r\n  \r\n}\r\n\r\nexport default EditProfilePopup;\r\n","\r\nimport { useEffect, useState, useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\nimport FormField from './FormField';\r\n\r\n/* \r\n * Note to reviewer: I really didn't want to use ref here, as it messes up my form validation code and doesn't work with my FormField component, \r\n * plus this is not an ideal use case anyway. Please see Card component for a ref example -- used there to remove focus from button after like.  \r\n */\r\n\r\nfunction EditAvatarPopup({isOpen, isSaving, onClose, onSubmit}) {\r\n\r\n  const currentUser= useContext(CurrentUserContext);\r\n\r\n  const [avatar, setAvatar]= useState('');\r\n  const [error, setError]= useState('');\r\n  const [submitReady, setSubmitReady]= useState(false);\r\n\r\n\r\n\r\n  function handleChange(e) {\r\n    setAvatar(e.target.value);\r\n    setError(e.target.validity.valid ? '' : e.target.validationMessage);\r\n    setSubmitReady(e.target.validity.valid);\r\n  } \r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onSubmit({avatar: avatar});\r\n  }\r\n\r\n  function handleReset() {\r\n    setAvatar(currentUser.avatar || ''); // prevent undefined value on controlled form field\r\n    setError('');\r\n    setSubmitReady(!!currentUser.avatar); // convert string to boolean to determine button state\r\n  }\r\n\r\n\r\n\r\n  useEffect(() => { \r\n      setAvatar(currentUser.avatar || ''); // prevent undefined value on controlled form field\r\n      setSubmitReady(!!currentUser.avatar); // convert string to boolean to determine button state\r\n  }, [currentUser]); \r\n\r\n\r\n  \r\n  return (\r\n    <PopupWithForm heading=\"Change profile picture\" name=\"avatar\" isOpen={isOpen} onClose={onClose} onReset={handleReset}\r\n      submitText={isSaving ? 'Saving...' : 'Save'} submitReady={submitReady} onSubmit={handleSubmit}>\r\n\r\n      <FormField isModal={true} name=\"profile-avatar\" type=\"url\" label=\"Image link\" value={avatar} handleChange={handleChange} error={error} />\r\n\r\n    </PopupWithForm>\r\n  );\r\n  \r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import { useState } from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\nimport FormField from './FormField';\r\n\r\n\r\n\r\nfunction AddPlacePopup({isOpen, isSaving, onClose, onSubmit}) {\r\n\r\n  const [values, setValues]= useState({ name: '', link: '' });\r\n  const [errors, setErrors]= useState({});\r\n  const [submitReady, setSubmitReady]= useState(false);\r\n\r\n\r\n\r\n  function handleChange(e) {\r\n    const name= e.target.name.split('-').pop();\r\n    setValues({...values, [name]: e.target.value });\r\n    \r\n    if(e.target.validity.valid) {\r\n      const updatedErrors= {...errors, [name]: '' }\r\n      setErrors(updatedErrors);\r\n      const errorValues= Object.values(updatedErrors);\r\n      if(errorValues.length === 2) setSubmitReady(!errorValues.some(i => i)); // enable submit if both fields checked and no error messages\r\n    } else {\r\n      setErrors({...errors, [name]: e.target.validationMessage });\r\n      setSubmitReady(false);\r\n    }\r\n  } \r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onSubmit(values, e);\r\n  }\r\n\r\n  function handleReset(e) {\r\n    setErrors({});\r\n    setSubmitReady(false);\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <PopupWithForm heading=\"New place\" name=\"photo\" isOpen={isOpen} onClose={onClose} onReset={handleReset}\r\n      submitText={isSaving ? 'Saving...' : 'Create'} submitReady={submitReady} onSubmit={handleSubmit}>\r\n\r\n      <FormField isModal={true} name=\"photo-name\" label=\"Title\" minMax={[2, 30]} error={errors.name} handleChange={handleChange} />\r\n      <FormField isModal={true} name=\"photo-link\" type=\"url\" label=\"Image link\" error={errors.link} handleChange={handleChange} />\r\n\r\n    </PopupWithForm>\r\n  );\r\n\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import PopupWithForm from './PopupWithForm';\n\n\n\nfunction DeletePlacePopup({isOpen, isSaving, onClose, cardId, onSubmit}) {\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onSubmit(cardId);\n  }\n\n\n\n  return (\n    <PopupWithForm heading=\"Are you sure?\" name=\"delete\" isOpen={isOpen} onClose={onClose}\n      submitReady={true} submitText={isSaving ? 'Saving...' : 'Yes'} onSubmit={handleSubmit} />\n  );\n  \n}\n\nexport default DeletePlacePopup;\n","function PopupWithImage(props) {\n  \n  return (\n    <div className={`popup popup_dark ${props.isOpen ? 'popup_active' : ''}`}>  \n      <div className=\"popup__item photo-viewer\">\n        <figure className=\"photo-viewer__figure\">\n          <img className=\"photo-viewer__image\" src={props.card.link} alt={props.card.name} />\n          <figcaption className=\"photo-viewer__caption\">{props.card.name}</figcaption>\n        </figure>\n        <button type=\"button\" className=\"popup__exit photo-viewer__exit button\" aria-label=\"Close Photo Viewer\" onClick={props.onClose}></button>\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithImage;\n","import { useState, useEffect } from 'react';\r\n\r\nimport { api } from '../utils/api.js';\r\n\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport avatar from '../images/avatar.png'; // default avatar (black 1 pixel)\r\n\r\nimport Main from './Main';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport DeletePlacePopup from './DeletePlacePopup';\r\nimport PopupWithImage from './PopupWithImage';\r\n\r\n\r\n\r\nfunction AroundTheUS() {\r\n\r\n  const [currentUser, setCurrentUser]= useState({name: '', about: '', avatar: avatar});\r\n  const [cards, setCards]= useState([]);\r\n  const [selectedCard, selectCard]= useState({});\r\n  const [isSaving, setIsSaving]= useState(false);\r\n\r\n  const [isProfilePopupOpen, setIsProfilePopupOpen]= useState(false);\r\n  const [isAvatarPopupOpen, setIsAvatarPopupOpen]= useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen]= useState(false);\r\n  const [isDeletePlacePopupOpen, setIsDeletePlacePopupOpen]= useState(false);\r\n  const [isImagePopupOpen, setIsImagePopupOpen]= useState(false);\r\n\r\n\r\n\r\n  const handleEditAvatarClick= () => { setIsAvatarPopupOpen(true); setListener(true); }\r\n  const handleEditProfileClick= () => { setIsProfilePopupOpen(true); setListener(true); }\r\n  const handleAddPlaceClick= () => { setIsAddPlacePopupOpen(true); setListener(true); }\r\n\r\n  const closeAllPopups= () => {\r\n    setIsAvatarPopupOpen(false);\r\n    setIsProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsDeletePlacePopupOpen(false);\r\n\r\n    setIsImagePopupOpen(false);\r\n    setTimeout(() => { selectCard({}); }, 200); // wait until fade animation completes before removing selected card data\r\n    \r\n    setListener(false);\r\n  }\r\n\r\n  const closeOnEsc= (e) => { \r\n    if(e.key === 'Escape') {\r\n      closeAllPopups(); \r\n    }\r\n  }\r\n\r\n  const setListener= (listen) => {\r\n    listen ?\r\n      document.addEventListener('keyup', closeOnEsc) :\r\n      document.removeEventListener('keyup', closeOnEsc);\r\n  }\r\n\r\n  const handleCardClick= (card) => {\r\n    selectCard(card);\r\n    setIsImagePopupOpen(true);\r\n    setListener(true);\r\n  }\r\n\r\n  const handleDeleteClick= (card) => {\r\n    selectCard(card);\r\n    setIsDeletePlacePopupOpen(true);\r\n    setListener(true);\r\n  }\r\n\r\n  \r\n\r\n  const updateProfile= (userData) => {\r\n    setIsSaving(true);\r\n    api.setUserInfo(userData)\r\n    .then((user) => {\r\n      setCurrentUser(user);\r\n      closeAllPopups();\r\n      setTimeout(() => { setIsSaving(false); }, 200); // wait until fade animation completes to reset button text\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      setIsSaving(false);\r\n    });\r\n  }\r\n\r\n  const updateAvatar= (avatarData) => {\r\n    setIsSaving(true);\r\n    api.setUserAvatar(avatarData)\r\n    .then((user) => {\r\n      setCurrentUser(user);\r\n      closeAllPopups();\r\n      setTimeout(() => { setIsSaving(false); }, 200);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      setIsSaving(false);\r\n    });\r\n    \r\n  }\r\n\r\n  const addCard= (cardData, e) => {\r\n    setIsSaving(true);\r\n    api.addCard(cardData)\r\n    .then((newCard) => {\r\n      setCards([newCard, ...cards]);\r\n      closeAllPopups();\r\n      setTimeout(() => { setIsSaving(false); }, 200);\r\n      e.target.reset(); // empty the form\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      setIsSaving(false);\r\n    });\r\n  }\r\n\r\n  const likeUnlikeCard= (card, e) => {\r\n    const currentUserLikes= card.likes.some(user => user._id === currentUser._id);\r\n    api.updateLikes(card._id, !currentUserLikes)\r\n      .then((updatedCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? updatedCard : c);  \r\n        setCards(newCards);\r\n        e.target.blur(); // prevents button from staying selected and highlighted after action completes\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  const deleteCard= (cardId) => {\r\n    setIsSaving(true);\r\n    api.deleteCard(cardId)\r\n    .then((response) => {\r\n      const newCards = cards.filter((card) => card._id !== cardId);  \r\n      setCards(newCards);\r\n      closeAllPopups();\r\n      setTimeout(() => { setIsSaving(false); }, 200);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      setIsSaving(false);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    api.getUserInfo()\r\n    .then((user) => {\r\n      setCurrentUser(user);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if(!currentUser) return;\r\n    api.getInitialCards()\r\n      .then(setCards)\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <Main \r\n        cards={cards}\r\n        onEditAvatar={handleEditAvatarClick} \r\n        onEditProfile={handleEditProfileClick} \r\n        onAddPlace={handleAddPlaceClick}\r\n        onCardClick={handleCardClick}\r\n        onDeleteClick={handleDeleteClick}\r\n        onLikeClick={likeUnlikeCard}\r\n      />\r\n\r\n      <EditProfilePopup isOpen={isProfilePopupOpen} onClose={closeAllPopups} onSubmit={updateProfile} isSaving={isSaving} />\r\n      <EditAvatarPopup isOpen={isAvatarPopupOpen} onClose={closeAllPopups} onSubmit={updateAvatar} isSaving={isSaving} />\r\n      <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onSubmit={addCard} isSaving={isSaving} />\r\n      <DeletePlacePopup isOpen={isDeletePlacePopupOpen} onClose={closeAllPopups} onSubmit={deleteCard} cardId={selectedCard._id} isSaving={isSaving} />\r\n\r\n      <PopupWithImage isOpen={isImagePopupOpen} onClose={closeAllPopups} card={selectedCard} />\r\n    </CurrentUserContext.Provider>\r\n  );\r\n\r\n}\r\n\r\nexport default AroundTheUS;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REQxMzQxQ0UxRUY0MTFFQjlEMEFGQ0NEMURDQTc3NkMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REQxMzQxQ0YxRUY0MTFFQjlEMEFGQ0NEMURDQTc3NkMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpERDEzNDFDQzFFRjQxMUVCOUQwQUZDQ0QxRENBNzc2QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpERDEzNDFDRDFFRjQxMUVCOUQwQUZDQ0QxRENBNzc2QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgV334EAAAAGUExURQAAAP///6XZn90AAAAMSURBVHjaYmAACDAAAAIAAU9tWeEAAAAASUVORK5CYII=\"","import { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport FormField from './FormField';\r\n\r\n\r\n\r\nfunction Login({handleLogin, isLoading}) {\r\n\r\n  const [values, setValues]= useState({ email: '', password: '' });\r\n  const [errors, setErrors]= useState({});\r\n  const [submitReady, setSubmitReady]= useState(false);\r\n\r\n\r\n\r\n  function handleChange(e) {\r\n    const name= e.target.name.split('-').pop();\r\n    setValues({...values, [name]: e.target.value });\r\n    \r\n    if(e.target.validity.valid) {\r\n      const updatedErrors= {...errors, [name]: '' };\r\n      setErrors(updatedErrors);\r\n      const errorValues= Object.values(updatedErrors);\r\n      if(errorValues.length === 2) setSubmitReady(!errorValues.some(i => i)); // enable submit if both fields checked and no error messages\r\n    } else {\r\n      setErrors({...errors, [name]: e.target.validationMessage });\r\n      setSubmitReady(false);\r\n    }\r\n  } \r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    handleLogin(values)\r\n      .catch(() => {\r\n        setValues({...values, password: '' });\r\n        setSubmitReady(false);\r\n      });\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <form name=\"login-form\" className=\"form\" onSubmit={handleSubmit}>\r\n        \r\n      <h3 className=\"form__heading\">Log in</h3>\r\n\r\n      <FormField name=\"login-email\" label=\"Email\" handleChange={handleChange} \r\n        value={values.email} error={errors.email} />\r\n\r\n      <FormField name=\"login-password\" type=\"password\" label=\"Password\" handleChange={handleChange} \r\n        value={values.password} error={errors.password} />\r\n      \r\n      <button type=\"submit\" className={`form__button${submitReady ? '' : ' form__button_disabled'}`} name=\"login-submit\">\r\n        {isLoading ? 'Loading...' : 'Log in'}\r\n      </button>\r\n      <Link to=\"/signup\" className=\"form__text link\">Not a member yet? Sign up here!</Link>\r\n\r\n    </form>\r\n  );\r\n  \r\n}\r\n\r\nexport default Login;\r\n","import { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport FormField from './FormField';\r\n\r\n\r\n\r\nfunction Register({handleRegister, isLoading}) {\r\n\r\n  const [values, setValues]= useState({ email: '', password: '' });\r\n  const [errors, setErrors]= useState({});\r\n  const [submitReady, setSubmitReady]= useState(false);\r\n\r\n\r\n\r\n  function handleChange(e) {\r\n    const name= e.target.name.split('-').pop();\r\n    setValues({...values, [name]: e.target.value });\r\n    \r\n    if(e.target.validity.valid) {\r\n      const updatedErrors= {...errors, [name]: '' };\r\n      setErrors(updatedErrors);\r\n      const errorValues= Object.values(updatedErrors);\r\n      if(errorValues.length === 2) setSubmitReady(!errorValues.some(i => i)); // enable submit if both fields checked and no error messages\r\n    } else {\r\n      setErrors({...errors, [name]: e.target.validationMessage });\r\n      setSubmitReady(false);\r\n    }\r\n  } \r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    handleRegister(values);\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <form name=\"register-form\" className=\"form\" onSubmit={handleSubmit}>\r\n        \r\n      <h3 className=\"form__heading\">Sign up</h3>\r\n\r\n      <FormField name=\"signup-email\" type=\"email\" label=\"Email\" minMax={[5, 320]} \r\n        handleChange={handleChange} value={values.email} error={errors.email} />\r\n\r\n      <FormField name=\"signup-password\" type=\"password\" label=\"Password\" minMax={[10, 256]} \r\n        handleChange={handleChange} value={values.password} error={errors.password} />\r\n      \r\n      <button type=\"submit\" className={`form__button${submitReady ? '' : ' form__button_disabled'}`} name=\"login-submit\">\r\n        {isLoading ? 'Loading...' : 'Sign up'}\r\n      </button>\r\n      <Link to=\"/signin\" className=\"form__text link\">Already a member? Log in here!</Link>\r\n\r\n    </form>\r\n  );\r\n  \r\n}\r\n\r\nexport default Register;\r\n","function InfoTooltip(props) {\r\n  \r\n  return (\r\n    <div className={`popup ${props.isOpen ? 'popup_active' : ''}`}>  \r\n      <div className={`popup__item modal modal_tooltip_${props.type}`}>\r\n        <p className=\"modal__heading\">{props.children}</p>\r\n        <button type=\"reset\" className=\"popup__exit button\" aria-label=\"Close\" onClick={props.onClose}></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;","function Footer() {\n\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">© 2020 Around the U.S.</p>\n    </footer>\n  );\n  \n}\n\nexport default Footer;\n","import { useState, useEffect } from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\n\nimport { auth } from '../utils/authApi.js';\nimport { AccountContext } from '../contexts/AccountContext.js';\nimport ProtectedRoute from './ProtectedRoute';\n\nimport Header from './Header';\nimport AroundTheUS from './AroundTheUS';\nimport Login from './Login';\nimport Register from './Register';\nimport InfoTooltip from './InfoTooltip';\nimport Footer from './Footer';\n\n\n\nfunction App() {\n\n  const history = useHistory();\n\n  const [loggedIn, setLoggedIn]= useState(false);\n  const [accountData, setAccountData]= useState({ _id: '', email: ''});\n\n  const [isLoading, setIsLoading]= useState(false);\n\n  const [isTooltipSuccessOpen, setIsTooltipSuccessOpen]= useState(false);\n  const [isTooltipErrorOpen, setIsTooltipErrorOpen]= useState(false);\n  const [isTooltipInvalidOpen, setIsTooltipInvalidOpen]= useState(false);\n\n\n\n  const closeAllTooltips= () => {\n    setIsTooltipInvalidOpen(false);\n    setIsTooltipSuccessOpen(false);\n    setIsTooltipErrorOpen(false);\n    setListener(false);\n  }\n\n  const closeOnEsc= (e) => { \n    if(e.key === 'Escape') closeAllTooltips(); \n  }\n\n  const setListener= (listen) => {\n    listen ?\n      document.addEventListener('keyup', closeOnEsc) :\n      document.removeEventListener('keyup', closeOnEsc);\n  }\n\n  const handleRegister= (credentials) => {\n    setIsLoading(true);\n    auth.register(credentials)\n      .then((res) => {\n        setIsTooltipSuccessOpen(true);\n        login(res.data);\n      })\n      .catch(() => {\n        setIsTooltipErrorOpen(true);\n      })\n      .finally(() => {\n        setListener(true);\n        setIsLoading(false);\n      });\n  }\n\n  const handleLogin= (credentials) => {\n    setIsLoading(true);\n    return auth.login(credentials)\n      .then((res) => {\n        login(res.data);\n        setIsLoading(false);\n      })\n      .catch(() => {\n        setIsTooltipInvalidOpen(true);\n        setListener(true);\n        setIsLoading(false);\n      });\n  }\n\n  const handleLogout= () => {\n    localStorage.removeItem('jwt');\n    setLoggedIn(false);\n  }\n\n  const login= (userData) => {\n    setLoggedIn(true);\n    setAccountData(userData);\n    history.push('/');\n  }\n\n\n  useEffect(() => {\n    const token = localStorage.getItem('jwt');\n    if (token) {\n      auth.checkToken(token).then((res) => {\n        if (res) {\n          setLoggedIn(true);\n          setAccountData(res.data);\n          history.push('/');\n        }\n      });\n    }\n  }, []);\n\n\n\n  return (\n    <AccountContext.Provider value={{ loggedIn, accountData }}>\n      <div className=\"container\">\n\n        <Header handleLogout={handleLogout} />\n\n        <Switch>\n          <ProtectedRoute exact path=\"/\" component={AroundTheUS} />\n\n          <Route path=\"/signin\">\n            <Login handleLogin={handleLogin} isLoading={isLoading} />\n          </Route>\n\n          <Route path=\"/signup\">\n            <Register handleRegister={handleRegister} isLoading={isLoading} />\n          </Route>\n\n          <Route>\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n          </Route>\n\n        </Switch>\n\n        <InfoTooltip type=\"success\" isOpen={isTooltipSuccessOpen} onClose={closeAllTooltips}>\n          Success! You have now been registered.\n        </InfoTooltip>\n\n        <InfoTooltip type=\"error\" isOpen={isTooltipErrorOpen} onClose={closeAllTooltips}>\n          Oops, something went wrong! Please try again.\n        </InfoTooltip>\n\n        <InfoTooltip type=\"error\" isOpen={isTooltipInvalidOpen} onClose={closeAllTooltips}>\n          Oops, your email or password was incorrect! Please try again.\n        </InfoTooltip>\n\n        <Footer />\n\n      </div>\n    </AccountContext.Provider>\n  );\n\n}\n\nexport default App;\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter basename=\"/react-around-auth\">\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}